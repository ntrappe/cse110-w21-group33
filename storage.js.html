<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: storage.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: storage.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* Variables for Local Storage */
const DEFAULT_WORK = 25;
const DEFAULT_SHORT_BREAK = 5;
const DEFAULT_LONG_BREAK = 15;
const EMPTY_VALUE = 0;
const MAX_VOL = 100;

/* Functions for Local Storage updates */

/**
 * Function to get the pomodoro completed for the day and check if it should reset local storage
 * @return {Number} total amount of Pomodoro completed for the day
 */
export function getDayCount() {
  // If local storage for pomodro completed is does not exist then we set current count to 0
  if (!localStorage.getItem('pomodoroCount')) {
    localStorage.setItem('pomodoroCount', EMPTY_VALUE);
  }
  // Clears local storage for the day if its a new day
  const date = new Date();
  if (
    date.getFullYear() > localStorage.getItem('prevYear') ||
    date.getMonth() + 1 > localStorage.getItem('prevMonth') ||
    date.getDate() > localStorage.getItem('prevDay')
  ) {
    localStorage.setItem('prevYear', date.getFullYear());
    localStorage.setItem('prevMonth', date.getMonth() + 1);
    localStorage.setItem('prevDay', date.getDate());
    localStorage.setItem('pomodoroCount', EMPTY_VALUE);
  }
  return parseInt(localStorage.getItem('pomodoroCount'), 10);
}

/**
 * Function to set the pomodoro completed for the day into local storage
 * @param {Number} count pomodoro completed
 */
export function setDayCount(count) {
  const date = new Date();
  // Creating new local storage for pomodoroCount if it is the first time
  if (!localStorage.getItem('prevDay')) {
    localStorage.setItem('prevYear', date.getFullYear());
    localStorage.setItem('prevMonth', date.getMonth() + 1);
    localStorage.setItem('prevDay', date.getDate());
    localStorage.setItem('pomodoroCount', EMPTY_VALUE);
  }
  // Clears local storage for the day if its a new day
  if (
    date.getFullYear() > localStorage.getItem('prevYear') ||
    date.getMonth() + 1 > localStorage.getItem('prevMonth') ||
    date.getDate() > localStorage.getItem('prevDay')
  ) {
    localStorage.setItem('prevYear', date.getFullYear());
    localStorage.setItem('prevMonth', date.getMonth() + 1);
    localStorage.setItem('prevDay', date.getDate());
    localStorage.setItem('pomodoroCount', EMPTY_VALUE);
  }
  localStorage.setItem('pomodoroCount', count + getDayCount());
}

/**
 * Function to get the current Calm value
 * @return {Boolean} boolean value of whether the user wanted calm more
 */
export function getCalm() {
  // Checking if there is a calm mode value stored in local storage
  if (!localStorage.getItem('isCalm')) {
    localStorage.setItem('isCalm', false); // Creating local storage for calm mode
  }
  if (localStorage.getItem('isCalm') === 'true') {
    return true;
  }
  return false;
}

/**
 * Function to be called whenever the onClick event is listened to for calm mode
 * @param {Boolean} calm setting of current calm mode
 */
export function setCalm(calm) {
  localStorage.setItem('isCalm', calm);
}

/**
 * Function to get the current volume value
 * @return {Number} value of last saved volume
 */
export function getVolume() {
  // Checking if there is a volume value stored in local storage
  if (!localStorage.getItem('volume')) {
    localStorage.setItem('volume', MAX_VOL); // setting default volume to be 100
  }
  return parseInt(localStorage.getItem('volume'), 10);
}

/**
 * Function to be called whenever the current volume is changed
 * @param {Number} vol volume saved
 */
export function setVolume(vol) {
  localStorage.setItem('volume', vol);
}

/**
 * Function to get the current sound
 * @return {String} last saved sound for alarm
 */
export function getSound() {
  // Checking if sound local storage was created
  if (!localStorage.getItem('sound')) {
    localStorage.setItem(
      'sound',
      'zapsplat_household_alarm_clock_old_fashioned_ring_very_short_44062.mp3'
    );
  }
  return localStorage.getItem('sound');
}

/**
 * Function to be called whenever the current sound is changed
 * @param {String} sound alarm sound saved
 */
export function setSound(sound) {
  localStorage.setItem('sound', sound);
}

/**
 * Function to get the current sound
 * @return {Boolean} boolean value of whether or not dark mode is enabled
 */
export function getDark() {
  // Checking if dark mode local storage was created
  if (!localStorage.getItem('isDark')) {
    localStorage.setItem('isDark', false); // Setting default mode into light mode
  }
  if (localStorage.getItem('isDark') === 'true') {
    return true;
  }
  return false;
}

/**
 * Function to be called whenever the onClick event is listened to for dark mode
 * @param {Boolean} dark Setting of current dark mode
 */
export function setDark(dark) {
  localStorage.setItem('isDark', dark);
}

/**
 * Function to get the duration of the work timer in minutes
 * @return {Number} saved value of work mode duration
 */
export function getWork() {
  // Checking if the duration of work mode has been changed
  if (!localStorage.getItem('work')) {
    localStorage.setItem('work', DEFAULT_WORK); // Setting default work mode to be 25 minutes
  }
  return parseInt(localStorage.getItem('work'), 10);
}

/**
 * Function to be called whenever the duration of work mode is changed
 * @param {Number} work duration of new work mode
 */
export function setWork(work) {
  localStorage.setItem('work', work);
}

/**
 * Function to get the duration of the short break timer in minutes
 * @return {Number} saved value of short break duration
 */
export function getShortBreak() {
  // Checking if the duration of short break has been changed
  if (!localStorage.getItem('shortBreak')) {
    // Setting default short break to be 5 minutes
    localStorage.setItem('shortBreak', DEFAULT_SHORT_BREAK);
  }
  return parseInt(localStorage.getItem('shortBreak'), 10);
}

/**
 * Function to be called whenever the duration of short break is changed
 * @param {Number} work duration of new short break
 */
export function setShortBreak(shortBreak) {
  localStorage.setItem('shortBreak', shortBreak);
}

/**
 * Function to get the duration of the long break timer in minutes
 * @return {Number} saved value of long break duration
 */
export function getLongBreak() {
  // Checking if the duration of long break has been changed
  if (!localStorage.getItem('longBreak')) {
    // Setting default long break to be 15 minutes
    localStorage.setItem('longBreak', DEFAULT_LONG_BREAK);
  }
  return parseInt(localStorage.getItem('longBreak'), 10);
}

/**
 * Function to be called whenever the duration of long break is changed
 * @param {Number} work duration of new long break
 */
export function setLongBreak(longBreak) {
  localStorage.setItem('longBreak', longBreak);
}

/**
 * Function to get the current accessibility setting
 * @return {Boolean} boolean value of whether the user wants app to be accessible by keystroke
 */
export function getAccessibility() {
  // Checking if there is a accessible value stored in local storage
  if (!localStorage.getItem('isAccessible')) {
    localStorage.setItem('isAccessible', true); // Default is on
  }
  if (localStorage.getItem('isAccessible') === 'true') {
    return true;
  }
  return false;
}

/**
 * Function to be called whenever the onClick event is listened to for accessibility
 * @param {Boolean} accessibility setting of accessibility
 */
export function setAccessibility(accessibility) {
  localStorage.setItem('isAccessible', accessibility);
}

/* End of functions for Local Storage */
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#defaultTab">defaultTab</a></li><li><a href="global.html#display">display</a></li><li><a href="global.html#getAccessibility">getAccessibility</a></li><li><a href="global.html#getCalm">getCalm</a></li><li><a href="global.html#getDark">getDark</a></li><li><a href="global.html#getDayCount">getDayCount</a></li><li><a href="global.html#getLongBreak">getLongBreak</a></li><li><a href="global.html#getShortBreak">getShortBreak</a></li><li><a href="global.html#getSound">getSound</a></li><li><a href="global.html#getVolume">getVolume</a></li><li><a href="global.html#getWork">getWork</a></li><li><a href="global.html#initProgess">initProgess</a></li><li><a href="global.html#setAccessibility">setAccessibility</a></li><li><a href="global.html#setCalm">setCalm</a></li><li><a href="global.html#setDark">setDark</a></li><li><a href="global.html#setDayCount">setDayCount</a></li><li><a href="global.html#setLongBreak">setLongBreak</a></li><li><a href="global.html#setProgressHelper">setProgressHelper</a></li><li><a href="global.html#setResetButton">setResetButton</a></li><li><a href="global.html#setShortBreak">setShortBreak</a></li><li><a href="global.html#setSound">setSound</a></li><li><a href="global.html#setStartButton">setStartButton</a></li><li><a href="global.html#setTab">setTab</a></li><li><a href="global.html#setTime">setTime</a></li><li><a href="global.html#setVolume">setVolume</a></li><li><a href="global.html#setWork">setWork</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Wed Mar 17 2021 05:27:17 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
